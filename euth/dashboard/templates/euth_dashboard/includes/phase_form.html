{% load i18n widget_tweaks form_tags %}

<div class="phase-form {% if form.instance.type == 'euth_offlinephases:000:offline' %}phaseform-offline-phase{% endif %}" {% if form.delete.value == '1' %}style="display: none;"{% endif %}>
    <div class="phasefrom-collapse-top">
        {% if form.instance.type == 'euth_offlinephases:000:offline' %}
        <button type="button" class="phaseform-delete btn btn-danger"><i class="fa fa-times" aria-hidden="true"></i></button>
        {% endif %}
        <h5>
            <a href="#phase-{{ form.prefix }}" class="collapse collapsed" data-toggle="collapse">
                {% if form.instance.id %}
                {{ form.instance.content.name }}
                {% elif form.type.value %}
                {% getPhaseName form.type.value as phasename %}
                {{ phasename }}
                {% else %}
                {% trans 'Offlinephase' %}
                {% endif %}
                {% if form.errors %}<span class="info-number">{{ form.errors|length }}</span>{% endif %}
                <i class="fa fa-chevron-up pull-right"></i>
            </a>
        </h5>
    </div>
    {% for error in form.non_field_errors %}
    <span class="help-block">{{ error }}</span>
    {% endfor %}


    <div class="single-phase collapse" id="phase-{{ form.prefix }}">
        {% for field in form.visible_fields %}
        {% if field != form.start_date and field != form.end_date %}
        <div class="form-group {% if field.errors %} has-error{% endif %}">
            <label>
                {{ field.label }} {% trans 'of Phase '%}: <br />
                {% if field.help_text %}
                <p><i>{{ field.help_text }}</i></p>
                {% endif %}
            </label>
            {% render_field field class="form-control" %}
            {% for error in field.errors %}
            <span class="help-block">{{ error }}</span>
            {% endfor %}
        </div>
        {% endif %}

        {% endfor %}
        <div class="row">
            <div class="col-lg-6">
                <div class="form-group {% if form.start_date.errors %} has-error{% endif %}">
                    <label>
                        {{ form.start_date.label }} {% trans 'of Phase '%}:</br>
                        {% if form.start_date.help_text %}
                        <i>{{ form.start_date.help_text }}</i><br />
                        {% endif %}
                    </label>
                    {% render_field form.start_date class="form-control" %}
                    {% for error in form.start_date.errors %}
                    <span class="help-block">{{ error }}</span>
                    {% endfor %}
                </div>
            </div>
            <div class="col-lg-6">
                <div class="form-group {% if form.end_date.errors %} has-error{% endif %}">
                    <label>
                        {{ form.end_date.label }} {% trans 'of Phase '%}:<br />
                        {% if form.end_date.help_text %}
                        <i>{{ form.end_date.help_text }}</i><br />
                        {% endif %}
                    </label>
                    {% render_field form.end_date class="form-control" %}
                    {% for error in form.end_date.errors %}
                    <span class="help-block">{{ error }}</span>
                    {% endfor %}
                </div>
            </div>
        </div>
        {% for hidden in form.hidden_fields %}
        {{ hidden }}
        {% endfor %}
        {% if form.instance.offlinephase %}
        <a class="update-offline-documentation btn btn-sm btn-dark btn-primary" href="{% url 'offlinephase-edit' form.instance.offlinephase.pk %}">{% trans 'edit documentation' %}</a>
        {% endif %}
    </div>
</div>
